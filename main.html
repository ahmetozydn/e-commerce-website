<!DOCTYPE html>
<html>

<head>
  <title>WEB WORKSPACE </title>
  <link rel="icon" type="image/x-icon" href="https://www.seiu1000.org/sites/main/files/main-images/camera_lense_0.jpeg">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  <link rel="stylesheet" href="home.css">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />


  <style>


  </style>

  <div class="no-padding">
    <ul class="nav" style="padding: 20px; margin: 0;">
      <span class="website-name" id = "refresh-page">
        <h2 style="display: inline; color: #f0900a;">Shopie</h2>
        
      </span>
      <a class="no-strike" href="demo.html">Home</a>
      <a class="no-strike" href="electronic.html">Electronic</a>
      <a class="no-strike" href="productDetails.html">Clothing</a>
      <a class="no-strike" href="#">Sport</a>
      <a class="no-strike" href="#">Home&Decoration</a>
      <a class="no-strike" href="temp.html">.temp</a>
      <i class="fa-regular fa-lightbulb custom-cursor" onclick="changeTheme(this)" style="transform: scale(1.5);"></i>
    </ul>
  </div>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<div class="main-container">

  <body>

    <div class="slideshow-container">

      <!-- Full-width images with number and caption text -->
      <div class="mySlides fade">
        <img src="./images/image2.png" style="width:100%">
      </div>

      <div class="mySlides fade">
        <img src="./images/image3.png" style="width:100%">
      </div>

      <div class="mySlides fade">
        <img src="./images/image1.png" style="width:100%">
      </div>

      <!-- Next and previous buttons -->
      <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
      <a class="next" onclick="plusSlides(1)">&#10095;</a>
    </div>
    <div style="text-align:center">
      <span class="dot" onclick="currentSlide(1)"></span>
      <span class="dot" onclick="currentSlide(2)"></span>
      <span class="dot" onclick="currentSlide(3)"></span>
    </div>


    <div id="main-card-container" class="card">
      <h2 style="padding: 0; margin: 0px;">Clothes</h2>
      <br>

    </div>

</div>

<div id="footer-placeholder"></div>


<!-- The dots/circles -->

<script>

document.addEventListener('DOMContentLoaded', fetchData);

async function fetchData() {
  const apiUrl = 'http://localhost:5050/api';

  try {
    const response = await fetch(apiUrl);

    if (!response.ok) {
      throw new Error('Network response was not ok.');
    }

    const jsonData = await response.json();
    displayData(jsonData);
    
    console.log(jsonData);
  } catch (error) {
    console.error('Error fetching data:', error.message);
  }
}

function displayData(jsonData){
  const mainCardContainer = document.getElementById('main-card-container');
  jsonData.forEach(element => {
    const content = `
<p>this is a paraghraph ${element.name}</p>
`
        const innerContent = `
<div id="card-container" class="card" style="width: 250px; height: 400px; margin: 10px;">
  <div class="card-content">
    
      <img src="${element.productImage}"; width : 250px; height : 250px; />
    <p>${element.name}</p>
    <p>$${element.price}</p>

  </div>
  <div>
  </div>
  `
        mainCardContainer.innerHTML += innerContent;
  });
}

  const mainCardContainer = document.getElementById('main-card-container');
  //const header = document.getElementsByClassName('main-container');

  const prefersDarkMode = localStorage.getItem('dark-mode-preference');
  if(prefersDarkMode === 'dark'){
    document.body.classList.toggle('dark-mode');
    mainCardContainer.classList.toggle('dark-mode');
    $('*').css('color','white');
    $('*').css('background-color','black');
    //header.classList.toggle('dark-mode');
  }

 $("#refresh-page").on('click', function() {
  //location.reload();
  window.location.href = './main.html';
}); 
  //const container = document.getElementById('json-container');
 /* fetch('./data/products.json')
    .then(response => response.json())
    .then(data => {
      // Get the container element


      //const eachJSON = JSON.parse(data);
      //let x = JSON.stringify(eachJSON,null,2)

      // Loop through the attributes of the JSON object

      for (let key in data) {

        console.log(data[key].name);
        //document.getElementById('name').textContent = data[key].name;
        //document.getElementById('description').textContent = data[key].price;
        //container.appendChild(document.getElementById("name"));
        //container.appendChild(document.getElementById("description"));
        const content = `
<p>this is a paraghraph ${data[key].name}</p>
`

        // Get the paragraph element by ID

        const innerContent = `
<div id="card-container" class="card" style="width: 180px; height: 300px; background-color: beige;">
  <div class="card-content">
    <p>${data[key].name}</p>
    <img src="${data[key].productImage}" />
  </div>
  <div>
    <p>${data[key].price}</p>
    <p></p>
  </div>
  `
        mainCardContainer.innerHTML += innerContent;

        //container.innerHTML += content;
      }

    })
    .catch(error => {
      console.log('Error:', error);
    });
 */
    
  let isMouseDown = false;
  let startX;
  let scrollLeft;

  const cardContainer = document.querySelector('#main-card-container');

  cardContainer.addEventListener('mousedown', (event) => {
    isMouseDown = true;
    startX = event.pageX - cardContainer.offsetLeft;
    scrollLeft = cardContainer.scrollLeft;
  });

  cardContainer.addEventListener('mouseleave', () => {
    isMouseDown = false;
  });

  cardContainer.addEventListener('mouseup', () => {
    isMouseDown = false;
  });

  cardContainer.addEventListener('mousemove', (event) => {
    if (!isMouseDown) return;
    event.preventDefault();
    const x = event.pageX - cardContainer.offsetLeft;
    const walk = (x - startX) * 1.5;
    cardContainer.scrollLeft = scrollLeft - walk;
  });
  /* fetch('./data/products.json')
  .then(response => response.json())
  .then(data => {
  // Display the JSON data in the UI
  const jsonOutput = document.getElementById('json-output');
  jsonOutput.textContent = JSON.stringify(data, null, 2);
  })
  .catch(error => {
  console.log('Error:', error);
  }); */

  let slideIndex = 0;
  showSlides();

  function showSlides() {
    let i;
    let slides = document.getElementsByClassName("mySlides");
    for (i = 0; i < slides.length; i++) { slides[i].style.display = "none"; } slideIndex++; if (slideIndex > slides.length) { slideIndex = 1 }
    slides[slideIndex - 1].style.display = "block";
    setTimeout(showSlides, 2000); // Change image every 2 seconds
  }
  fetch('./footer.html')
    .then(response => response.text())
    .then(data => {
      // Insert the navigation code into the placeholder div
      document.getElementById('footer-placeholder').innerHTML = data;
    });

    function onClickProduct(){

    }




  var eachCard =  document.getElementById('main-card-container');
   eachCard.addEventListener('click', function() {
  //console.log('Div clicked!');


  var clickedElement = event.target;
    const card = clickedElement.closest('#card-container');
    const productName = card.querySelector('p').textContent;
    console.log(productName);
  var url = 'productDetails.html?name='+ encodeURIComponent(productName);
  window.location.href = url;


  var title = clickedElement.querySelector('p').innerText;

  var cards = document.querySelectorAll("#main-card-container");
for (var i=0; i<cards.length; i++) {
  cards[i].addEventListener('click', function(e) {
 
    //console.log("clickable card!")
    //console.log(i);
  }, false);

}

}); 

function changeTheme(icon){
const body = document.body;
//mainCardContainer.classList.toggle('dark-mode');
  //body.classList.toggle('dark-mode');
  icon.classList.toggle("fa-moon");
  $('*').css('color','white');
    $('*').css('background-color','rgba(35,37,47,255)');
 
  if (body.classList.contains('dark-mode')) {
    localStorage.setItem('dark-mode-preference', 'dark');
    //body.classList.remove('dark-mode');
    console.log("dark mode");
  } else {
    //body.classList.add('dark-mode');
    localStorage.setItem('dark-mode-preference', 'light');
    console.log("light mode");
  }

  /*icon.classList.remove("fa-sun");
  icon.classList.add("fa-moon");
  var name = icon.className;
  if(name == "fa-regular fa-sun"){
    body.classList.toggle(dark_mode);
    console.log(name); */
  }

</script>


</body>

</html>